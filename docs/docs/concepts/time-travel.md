_ν•κµ­μ–΄λ΅ κΈ°κ³„λ²μ—­λ¨_

# μ‹κ°„ μ—¬ν–‰ β±οΈ

!!! μ°Έκ³  "μ „μ  μ΅°κ±΄"

    μ΄ κ°€μ΄λ“λ” LangGraphμ μ²΄ν¬ν¬μΈνΈμ™€ μƒνƒμ— μµμ™ν•λ‹¤κ³  κ°€μ •ν•©λ‹λ‹¤. κ·Έλ ‡μ§€ μ•μΌμ‹λ‹¤λ©΄, λ¨Όμ € [μ§€μ†μ„±](./persistence.md) κ°λ…μ„ κ²€ν† ν•΄ μ£Όμ‹κΈ° λ°”λλ‹λ‹¤.


λ¨λΈ κΈ°λ° κ²°μ •μ„ λ‚΄λ¦¬λ” λΉ„κ²°μ •λ΅ μ  μ‹μ¤ν…(μ: LLMμΌλ΅ κµ¬λ™λλ” μ—μ΄μ „νΈ)κ³Ό μ‘μ—…ν•  λ•, κ·Έλ“¤μ μμ‚¬κ²°μ • κ³Όμ •μ μ„Έλ¶€ μ‚¬ν•­μ„ μ‚΄ν΄λ³΄λ” κ²ƒμ΄ μ μ©ν•  μ μμµλ‹λ‹¤:

1. π¤” **μ¶”λ΅  μ΄ν•΄**: μ„±κ³µμ μΈ κ²°κ³Όλ΅ μ΄μ–΄μ§„ λ‹¨κ³„λ¥Ό λ¶„μ„ν•©λ‹λ‹¤.
2. π **μ¤λ¥ λ””λ²„κΉ…**: μ¤λ¥κ°€ λ°μƒν• μ„μΉμ™€ μ΄μ λ¥Ό μ‹λ³„ν•©λ‹λ‹¤.
3. π” **λ€μ• νƒμƒ‰**: λ” λ‚μ€ μ†”λ£¨μ…μ„ μ°ΎκΈ° μ„ν•΄ λ‹¤μ–‘ν• κ²½λ΅λ¥Ό ν…μ¤νΈν•©λ‹λ‹¤.

μ΄λ¬ν• λ””λ²„κΉ… κΈ°λ²•μ„ **μ‹κ°„ μ—¬ν–‰**μ΄λΌκ³  λ¶€λ¥΄λ©°, λ‘ κ°€μ§€ μ£Όμ” μ‘μ—…μΈ [**μ¬μƒ**](#replaying) π”κ³Ό [**ν¬ν¬**](#forking) π”€λ΅ κµ¬μ„±λ©λ‹λ‹¤.

## μ¬μƒ

![](./img/human_in_the_loop/replay.png)

μ¬μƒμ€ νΉμ • λ‹¨κ³„(μ²΄ν¬ν¬μΈνΈ)κΉμ§€ μ—μ΄μ „νΈμ μ΄μ „ ν–‰λ™μ„ λ‹¤μ‹ λ°©λ¬Έν•κ³  μ¬ν„ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.

νΉμ • μ²΄ν¬ν¬μΈνΈ μ΄μ „μ ν–‰λ™μ„ μ¬μƒν•λ ¤λ©΄, λ¨Όμ € μ¤λ λ“μ— λ€ν• λ¨λ“  μ²΄ν¬ν¬μΈνΈλ¥Ό κ²€μƒ‰ν•©λ‹λ‹¤:

```python
all_checkpoints = []
for state in graph.get_state_history(thread):
    all_checkpoints.append(state)
```

κ° μ²΄ν¬ν¬μΈνΈμ—λ” κ³ μ ν• IDκ°€ μμµλ‹λ‹¤. μ›ν•λ” μ²΄ν¬ν¬μΈνΈ, μλ¥Ό λ“¤μ–΄ `xyz`λ¥Ό ν™•μΈν• ν›„, ν•΄λ‹Ή IDλ¥Ό κµ¬μ„±μ— ν¬ν•¨μ‹ν‚µλ‹λ‹¤:

```python
config = {'configurable': {'thread_id': '1', 'checkpoint_id': 'xyz'}}
for event in graph.stream(None, config, stream_mode="values"):
    print(event)
```

κ·Έλν”„λ” μ κ³µλ `checkpoint_id` _μ΄μ „_μ— μ‹¤ν–‰λ μ΄μ „ λ‹¨κ³„λ¥Ό μ¬μƒν•κ³ , `checkpoint_id` _μ΄ν›„_μ λ‹¨κ³„λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤(μ¦‰, μƒλ΅μ΄ ν¬ν¬λ¥Ό μƒμ„±ν•©λ‹λ‹¤). μ΄μ „μ— μ‹¤ν–‰λ κ²½μ°μ—λ„ λ§μ°¬κ°€μ§€μ…λ‹λ‹¤.

## ν¬ν¬

![](./img/human_in_the_loop/forking.png)

ν¬ν¬λ” μ—μ΄μ „νΈμ μ΄μ „ ν–‰λ™μ„ λ‹¤μ‹ λ°©λ¬Έν•κ³  κ·Έλν”„ λ‚΄μ—μ„ λ€μ• κ²½λ΅λ¥Ό νƒμƒ‰ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.

νΉμ • μ²΄ν¬ν¬μΈνΈ, μλ¥Ό λ“¤μ–΄ `xyz`λ¥Ό μμ •ν•λ ¤λ©΄, κ·Έλν”„μ μƒνƒλ¥Ό μ—…λ°μ΄νΈν•  λ• κ·Έ `checkpoint_id`λ¥Ό μ κ³µν•΄μ•Ό ν•©λ‹λ‹¤:

```python
config = {"configurable": {"thread_id": "1", "checkpoint_id": "xyz"}}
graph.update_state(config, {"state": "updated state"})
```

μ΄λ ‡κ² ν•λ©΄ xyz-forkλΌλ” μƒλ΅μ΄ ν¬ν¬λ μ²΄ν¬ν¬μΈνΈκ°€ μƒμ„±λλ©°, μ—¬κΈ°μ„ κ·Έλν”„λ¥Ό κ³„μ† μ‹¤ν–‰ν•  μ μμµλ‹λ‹¤:

```python
config = {'configurable': {'thread_id': '1', 'checkpoint_id': 'xyz-fork'}}
for event in graph.stream(None, config, stream_mode="values"):
    print(event)
```

## μ¶”κ°€ μλ£ π“

- [**κ°λ…μ  κ°€μ΄λ“: μ§€μ†μ„±**](https://langchain-ai.github.io/langgraph/concepts/persistence/#replay): μ¬μƒμ— λ€ν• λ” λ§μ€ λ‚΄μ©μ„ μ•κ³  μ‹¶λ‹¤λ©΄ μ§€μ†μ„± κ°€μ΄λ“λ¥Ό μ½μ–΄λ³΄μ„Έμ”.
- [**κ³Όκ±° κ·Έλν”„ μƒνƒ λ³΄κΈ° λ° μ—…λ°μ΄νΈν•κΈ°**](../how-tos/human_in_the_loop/time-travel.ipynb): **μ¬μƒ** λ° **ν¬ν¬** μ‘μ—…μ„ μ‹μ—°ν•μ—¬ κ·Έλν”„ μƒνƒ μ‘μ—…μ— λ€ν• λ‹¨κ³„λ³„ μ§€μΉ¨μ…λ‹λ‹¤.
